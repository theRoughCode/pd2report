\usepackage{setspace}
\usepackage{url}
\usepackage{graphicx}
\usepackage{tocloft}
\usepackage{color}
\usepackage{scrextend}
\usepackage{titletoc}
\usepackage{sectsty}
\usepackage{fancyhdr}
\usepackage{amsmath,amsthm,amssymb}
\usepackage[utf8]{inputenc}
\usepackage[hmargin=1.5in, vmargin=1.5in]{geometry}

%%% Optional Math macros used in Raphael Koh's research %%%

% Theorems
\theoremstyle{plain}
\newtheorem{thm}{Theorem}[section] % reset theorem numbering for each chapter
\newtheorem{corr}[thm]{Corollary}
\newtheorem{lemma}[thm]{Lemma}
\newtheorem{claim}[thm]{Claim}
\newtheorem{prop}[thm]{Proposition}

% Definitions
\theoremstyle{definition}
\newtheorem{defn}[thm]{Definition} % definition numbers are dependent on theorem numbers

% Edit proof formatting (make bold)
\renewcommand{\qedsymbol}{$\blacksquare$}
\makeatletter
\renewenvironment{proof}[1][\proofname] {\par\pushQED{\qed}\normalfont\topsep-6\p@\@plus6\p@\relax\trivlist\item[\hskip\labelsep\bfseries#1\@addpunct{.}]\ignorespaces}{\popQED\endtrivlist\@endpefalse}
\makeatother

% Decrease spacing between items in lists and before lists
\setlist[enumerate]{noitemsep,topsep=0pt}

% Math/Linear Algebra/Quantum Physics notation
% math notation
\newcommand{\La}{\mathcal{L}}
\newcommand{\I}{\mathbb{I}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\Z}{\mathbb{Z}}

\newcommand{\dash}{\text{-}}

\newcommand{\ketbra}[2]{\ket{#1}\!\bra{#2}}        % outer product
\newcommand{\density}[1]{\ketbra{#1}{#1}}          % density matrix of a pure state
\newcommand{\Ket}[1]{\left|#1\right\rangle}        % big ket
\newcommand{\Bra}[1]{\left\langle #1\right|}       % big bra

\newcommand{\set}[1]{{\left\{#1\right\}}}          % braces for set notation
\newcommand{\size}[1]{\left|#1\right|}             % cardinality

\newcommand{\norm}[1]{\left\|\,#1\,\right\|}       % norm
\newcommand{\trnorm}[1]{\norm{#1}_{\mathrm {tr}}}  % trace norm

\newcommand{\trace}{{\rm Tr}}
\newcommand{\transpose}{{\mathrm T}}

\newcommand{\floor}[1]{\left\lfloor#1\right\rfloor}
\newcommand{\ceil}[1]{\left\lceil#1\right\rceil}
\newcommand{\expct}{{\mathrm E}}

\newcommand{\irow}[1]{% inline row vector
  \begin{smallmatrix}(#1)\end{smallmatrix}%
}

%%% End of optional Math macros %%%


% This is the styles files, you don't need to edit this whatsoever unless you
% want to change the format of the report. As it is now, it conforms exactly
% to the Spring 2019 Math Work Report Guidelines


\sectionfont{\normalsize}
\subsectionfont{\normalsize}
\subsubsectionfont{\normalsize}

\newcommand{\faculty}[1]{
\newcommand{\myFaculty}{#1}
}

\newcommand{\reporttitle}[1] {
\newcommand{\myTitle}{#1}
}

\newcommand{\fullname}[1] {
\newcommand{\myName}{#1}
}

\newcommand{\term}[1] {
\newcommand{\myTerm}{#1}
}

\newcommand{\program}[1] {
\newcommand{\myProgram}{#1}
}

\newcommand{\studentid}[1] {
\newcommand{\myIdNumber}{#1}
}

\newcommand{\address}[1] {
\newcommand{\myAddress}{#1}
}

\newcommand{\city}[1] {
\newcommand{\myCity}{#1}
}

\newcommand{\postalcode}[1] {
\newcommand{\myPostalCode}{#1}
}

\newcommand{\pdtitle}[1] {
\newcommand{\myPD}{#1}
}

\newcommand{\UwLocation}{Waterloo, Ontario}

\newcommand{\supervisor}[4] {
\newcommand{\supervisorAddress}{#1 #2 #3}
\newcommand{\supervisorSalutation}{#1 #3}
\newcommand{\supervisorLocation}{#4}
}

\newlength\mylen
\settowidth\mylen{Figure\ }
\addtolength\cftfignumwidth{\mylen}
\addtolength\cfttabnumwidth{\mylen}
\renewcommand*{\cftfigfont}{Figure }
\renewcommand*{\cfttabfont}{Table \hspace{0.075in}}

\doublespacing
\addtolength{\parskip}{\baselineskip}
\setlength{\parindent}{0pt}
\setlength{\cftsecnumwidth}{25pt}
\setlength{\parskip}{1em}

\newcommand{\waterlootitlepage}[4] {

\titlecontents{section}
[0pt]
{}%
{\contentsmargin{0pt}
    \thecontentslabel\enspace%
    }
    {\contentsmargin{0pt}}
    {\titlerule*[.5pc]{.}\contentspage}
    []

    \begin{singlespace}
    \begin{titlepage}
    \begin{center}
    \textbf{\MakeUppercase{University of Waterloo}} \\
    #1
    \vfill
    {
    \textsc{\textbf{\MakeUppercase{#2}}}
    }
    \vfill
    #3
    \vfill
    Prepared by \\
    #4
    \end{center}
    \end{titlepage}
    \end{singlespace}


    }

    \newcommand{\waterlooletterofsubmittal}[9] {
    \begin{waterlooletter}
    #1 \\
    #2 \\
    #3 \\ \\
    \today \\ \\
    #4, PD2 Instructor \\
    Professional Development Program \\
    University of Waterloo \\
    200 University Avenue West \\
    Waterloo, Ontario \\
    N2L 3G1 \\ \\
    Dear #5: \\

    #8

    Sincerely, \\ \\
    #9 \\
    #6 \\
    ID #7
    \end{waterlooletter}
    }

    \newcommand{\waterloomemoofsubmittal}[5] {
    \begin{waterlooletter}
    \section*{Memorandum} {
    To:       #1 \\
    From:     #2 \\
    Date:     \today\\
    Re:       Work Report: #3\\

    \noindent\rule{14cm}{1.9pt}

    #4

    Sincerely,\\ \\
    #5
    }
    \end{waterlooletter}
    }

    \newenvironment{waterlooletter}{
    \begin{singlespace}}{
    \end{singlespace}
    \thispagestyle{empty}
    \newpage
    }

    \makeatletter
    \renewcommand\@biblabel[1]{#1} % No brackets for the references
    \renewenvironment{thebibliography}[1]
         {\section*{\refname}%
          \@mkboth{\MakeUppercase\refname}{\MakeUppercase\refname}%
          \list{\@biblabel{\@arabic\c@enumiv}}%
               {\settowidth\labelwidth{\@biblabel{#1}}%
                \leftmargin\labelwidth
                \advance\leftmargin20pt% change 20 pt according to your needs
                \advance\leftmargin\labelsep
                \setlength\itemindent{-20pt}% change using the inverse of the length used before
                \@openbib@code
                \usecounter{enumiv}%
                \let\p@enumiv\@empty
                \renewcommand\theenumiv{\@arabic\c@enumiv}}%
          \sloppy
          \clubpenalty4000
          \@clubpenalty \clubpenalty
          \widowpenalty4000%
          \sfcode`\.\@m}
         {\def\@noitemerr
           {\@latex@warning{Empty `thebibliography' environment}}%
          \endlist}
    \renewcommand\newblock{\hskip .11em\@plus.33em\@minus.07em}
    \makeatother

    \newcommand{\makereferences}[1]{
    \newpage
    \addcontentsline{toc}{section}{References}
    \begin{thebibliography}{99\kern\bibindent}
    #1
    \end{thebibliography}
    \newpage
    }

    \newcommand{\addanappendix}[2]{
    \tocsection{#1}
    #2
    }

    \makeatletter
    \renewcommand\ext@table{lof}
    \makeatother

    \renewcommand\cftfigpresnum{Figure }
    \renewcommand\cfttabpresnum{Table }

    \newcommand{\mytableofcontents} {
    \tableofcontents
    \newpage

    % OPTIONAL
    % \begin{center}
    % \tocsection{List of Tables and Figures}
    % \end{center}
    % \listoffigures
    % \newpage
    }

    \newcommand{\myFigure}[3] {
    \begin{figure}
    \centering
    \scalebox{#1}{\includegraphics{#2}}
    \caption{#3}
    \end{figure}
    }

    \newcommand{\myTable}[3] {
    \begin{table}
    \centering
    \scalebox{#1}{\includegraphics{#2}}
    \caption{#3}
    \end{table}
    }

    \renewcommand{\contentsname} {
    \begin{center}
    Table of Contents
    \end{center}
    }

    \newcommand{\bulletpoints}[1]{
    \begin{spaceditemize}
    #1
    \end{spaceditemize}
    }

    \renewcommand{\listfigurename}{}
    \renewcommand{\cftsecleader}{\bfseries\cftdotfill{\cftdotsep}}
    \renewcommand{\cftfigpresnum}{Figure }
    \renewcommand{\cftfigaftersnum}{ --- }
    \renewcommand{\cftfignumwidth}{65pt}
    \newcommand{\tocsection}[1]{
    \section*{#1}
    \addcontentsline{toc}{section}{#1}
    }

    \newenvironment{spaceditemize}{
    \begin{list}{$\bullet$}
    {
    \setlength{\parskip}{0pt}
    }}
    {\end{list}\bigskip
    }
